# ABC159振り返り記事+解説(Eまで)

みなさんこんにちは。しるびあです。2020/3/22のABCの振り返り+解説をしようと思います。

さて、今回の結果ですが、65分ABCDE5完の770位でパフォーマンスは1617でした。

## A - The Number of Even Pairs(~1:17)
二つの数を選んで和が偶数になるような偶数[tex: N]個と奇数[tex: M]個の組み合わせは何通りあるかという問題です。

和が偶数であることと二つの数の偶奇が一致することは同値ですから[tex: \frac{n(n-1)}{2}+ \frac{m(m-1)}{2}]となります。
オーバーフローはさすがにないだろうと思ったが一応確認し、制約からあり得ないことがわかるのでサンプルを確認しつつ提出してAC。


## B - String Palindrome(~6:13)
文字列が与えられ、
- 文字列全体
- 文字列の中央を除いた前半分
- 文字列の中央を除いた後半分

がそれぞれ階分であればYes,そうでなければNoを出力する問題。

いちいち処理を書くのは面倒なので回文か否かを判定する関数をつくり、その引数としてs,s.substring(0,s.length()/2),s.substring(s.length()/2+1)の3つを渡してやればいいことがわかります。
サンプルが通ることを確認してAC。

## C - Maximum Volume(~8:50)
歴代Cで最易?なのでしょうか。[tex: \frac{L ^ 3}{27} ]を出力すれば良いです。
誤差が心配になりましたがまあ通るでしょうと高を括りました。
pythonだとワンライナーでACができます。
```python
print(pow(int(input()), 3)/27)
```

shortestはkotatsugameさんの12Byteでした。コンテスト中にゴルフするの頭おかしい。
```perl
say get³/27
```

## D - Banned K(~16:31)
[tex: k]個のボールから一つ取り除いたときに、同じ値のボールを取る組み合わせがいくつあるかを出力する問題です。

はじめ、取り除いたボールと同じ値を取る組み合わせと誤読していて、サンプルが合わずもやもや。すると全ての同じ値の取り方の組み合わせからそれを引けばよいことがわかります。
はじめからどの値が何個あるかどうかを数えておき、一つも取り除かなかった時の組み合わせの数を求められます。そして取り除いた値が[tex: x]個あったとすると、取り除いたことによって減る組み合わせ数は[tex: x-1]通りであるので、これを出力すればいいことがわかります。

Aと違ってオーバーフローする可能性がある(最大は[199999*199998/2 = 19999700001 \ne 2 \times 10^10 > \text{Integer.MAXVALUE()}]です)のでしっかりとlong型を使用する必要があることに注意しましょう。

今回はHashMapを使用しましたが、配列でも十分に間に合うのでそっちの方が単純さという面では良いのかもしれません。

## E - Dividing Chocolate(~65:31)
バグり散らかしたけど今回初めてコンテスト時間中にEを通しました。Diff1368なので自分が解ける確率は五分五分といったところっぽかったのですが、無事AC。

まず問題を見て思ったことは[tex: H \leq 10]に明らかな違和感を覚えたこと。これはbit全探索なのだろうかと勘良く気づきます。それもそのはず、私はコンテスト当日午後にbit全探索を書いていました([AtCoder Beginner Contest 147 C - HonestOrUnkind2](https://atcoder.jp/contests/abc147/tasks/abc147_c))

というわけで、[tex: N \leq 10]を見たらbit全探索しかないだろうというヤバすぎる条件反射を身に着けてしまった私はbit全探索のあとどうすればいいんだろうと思います。

思えば、チョコレートは横に裂いてから縦に割るとき、全て割る必要があることに気づきます。つまり、

(gazou)

がNGとなってしまいます。

それなら左から貪欲に割っていけば十分そうです。つまり,どこかの部分が[tex: k]を超えたとき、その列を次のセクションとして割ることを考えればそれが最小の割り方になります。
これは証明もできそうです。

さて、長方形の中に含まれるホワイトチョコレートの数をどのように保持しておくかといえば、[tex :(1,1)]から[tex: (i,j)]までの長方形領域に含まれるホワイトチョコレートの数をacc[i][j]として求めればよいです。
このとき、[tex: (x _ 1, y _ 1)]と[tex: (x _ 2, y _ 2)]を頂点に持つ長方形領域に含まれるホワイトチョコレートの数は以下のようにして求められます。

<div>
[tex: f(x _ 1, y _ 1, x _ 2, y _ 2) = acc[x _ 2][y _ 2] - acc[x _ 1 - 1][y _ 2] - acc[x _ 2][y _ 1 -1] + acc [x_ 1][y _ 1] ]
</div>

それを考えると、左右一マスにつき[tex: O(H)]で[tex: k]を超えているかどうかを判定することができます。ここで注意する必要があるのは、一列で[tex: k]を超えるような分割があるとき、それは無効な分割であるとして適当な大きな数をreturnする必要があるということです。
たとえば以下のような入力
```text
4 4 2
1000
1101
1000
1011
```
が与えられたとき、横に裂かなければ一列目がどのようにしても制約を超えるためinvalidな分割になってしまいます。

これに注意しながら各々の裂き方について最小手数を求め、それをchminしていくことで答えにたどり着きます。

添え字に20分かけてバグを丁寧…丁寧に…

＿人人人人人人人人人人人人人人＿<br>
＞  このまま君を連れていくよ  ＜<br>
￣Y\^Y\^Y\^Y\^Y\^Y\^Y\^Y\^Y\^Y\^Y\^Y\^Y\^Y\^￣<br>

＿人人人人人人人人人人＿<br>
＞  丁寧 丁寧 丁寧に  ＜<br>
￣Y\^Y\^Y\^Y\^Y\^Y\^Y\^Y\^Y\^Y\^￣<br>

取り除いた結果ACが出来ました。万歳。

## S - platoon2(~120:00)
コンブトラック・ハコフグ倉庫のガチホコバトルです。
ここではコンブトラックの右通路での優位性を懸案してバレルスピナーリミックスを持つことにしました。ハコフグ倉庫ではナイスダマによる通路の封鎖や高台の制圧を意識し、ホコを持った際には正面壁にごっつんこしてカウント11を得るということを意識して立ち回りました。
また味方のサポートや塗りの管理など、全体を俯瞰して戦況をコントロールすることによってガチパワーを50盛ることができました。



レートは1360となり、Highestを更新しました。これを続けられるように頑張ろうと思います。対戦ありがとうございました。